<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- no cache -->
    <meta http-equiv="Cache-Conatrol" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THAILAND LOCKSMITH 2025</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <!-- /icon -->
    <link rel="icon" href="https://img2.pic.in.th/pic/1730737040513.png" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background: linear-gradient(135deg, #ff8f04 0%, #ffad42 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        /* Modern Card Design */
        .card-modern {
            background: white;
            border-radius: 24px;
            padding: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .card-modern:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.15);
        }

        /* Header Styles */
        .header-modern {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            border-radius: 24px;
            padding: 32px 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
            margin-bottom: 24px;
            position: relative;
            overflow: hidden;
        }

        .header-modern::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
        }


        .header-modern img {
            position: relative;
            z-index: 1;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.2));
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        .header-text {
            color: #ff8f04;
            position: relative;
            z-index: 1;
        }

        /* Modern Button Styles */
        .btn-card {
            position: relative;
            overflow: hidden;
            border: none;
            border-radius: 20px;
            padding: 20px 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            cursor: pointer;
        }

        .btn-card::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn-card:hover::before {
            width: 400px;
            height: 400px;
        }

        .btn-orange {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            color: #ff8f04;
            font-weight: 600;
            border: 2px solid #ff8f04;
        }

        .btn-orange:hover {
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #000;
        }

        .btn-gold {
            background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%);
            color: #ffad42;
            font-weight: 600;
            border: 2px solid #ffad42;
        }

        .btn-gold:hover {
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%);
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            border-color: #000;
        }

        .btn-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.2);
            margin-left: 12px;
            transition: all 0.3s ease;
        }

        .btn-card:hover .btn-icon {
            transform: translateX(4px);
            background: rgba(0, 0, 0, 0.3);
        }

        /* Form Styles */
        .form-control {
            background-color: #f5f5f5;
            color: #333;
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 12px 16px;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .form-control:focus {
            background-color: #fff;
            border-color: #ff8f04;
            box-shadow: 0 0 0 4px rgba(255, 143, 4, 0.15);
            outline: none;
        }

        .form-control::placeholder {
            color: #999;
        }

        form label {
            font-size: 0.95rem !important;
            color: #4b4b49;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .form-section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #000000;
            margin: 24px 0 16px 0;
            padding-bottom: 8px;
            border-bottom: 3px solid #ff8f04;
            display: inline-block;
        }

        /* Radio and Checkbox Styles */
        .form-check {
            padding: 12px 16px;
            margin: 8px 0;
            background: #f8f8f8;
            border-radius: 12px;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .form-check:hover {
            background: #fff;
            border-color: #ff8f04;
            transform: translateX(4px);
        }

        .form-check-input {
            width: 22px;
            height: 22px;
            margin-right: 12px;
            border: 2px solid #ccc;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-check-input:checked {
            background-color: #ff8f04;
            border-color: #ff8f04;
        }

        .form-check-input:focus {
            box-shadow: 0 0 0 4px rgba(255, 143, 4, 0.2);
        }

        .form-check-label {
            cursor: pointer;
            user-select: none;
        }

        /* Submit Button */
        .submit-btn {
            font-weight: 700;
            color: #fff;
            background: linear-gradient(135deg, #ff8f04 0%, #ff6f00 100%);
            padding: 16px 48px;
            border: none;
            border-radius: 50px;
            box-shadow: 0 4px 20px rgba(255, 143, 4, 0.5);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.1rem;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .submit-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .submit-btn:hover::before {
            left: 100%;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px rgba(255, 143, 4, 0.8);
            background: linear-gradient(135deg, #ff6f00 0%, #e65100 100%);
        }

        .submit-btn:active {
            transform: translateY(0px);
        }

        /* Spacing and Layout */
        .row.g-4 {
            margin-bottom: 16px;
        }

        /* Validation Styles */
        .invalid-feedback {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 4px;
        }

        .form-control.is-invalid {
            border-color: #dc3545;
        }

        /* Helper Text */
        .form-text {
            color: #6c757d;
            font-size: 0.875rem;
            font-style: italic;
        }

        /* Responsive */
        @media (max-width: 576px) {
            .container {
                padding: 0 16px;
            }

            .card-modern {
                padding: 20px;
                border-radius: 20px;
            }

            .header-modern {
                padding: 24px 20px;
                border-radius: 20px;
            }
        }

        /* Loading Overlay Custom */
        .loadingoverlay {
            background: linear-gradient(135deg, rgba(255, 143, 4, 0.65) 0%, rgba(255, 173, 66, 0.65) 100%) !important;
        }

        .loadingoverlay_element {
            border-color: #ffffff transparent #ffffff transparent !important;
        }

        /* Select Dropdown */
        select.form-control {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23333' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px 12px;
            padding-right: 40px;
        }

        /* Custom SweetAlert2 Styles - Theme Colors */
        .swal2-popup {
            border-radius: 24px !important;
            padding: 2em !important;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2) !important;
        }

        .swal2-title {
            color: #000000 !important;
            font-weight: 700 !important;
            font-family: 'Prompt', sans-serif !important;
            font-size: 1.75rem !important;
        }

        .swal2-html-container {
            color: #333333 !important;
            font-family: 'Prompt', sans-serif !important;
            font-size: 1rem !important;
            line-height: 1.6 !important;
        }

        /* Confirm Button - Orange Theme */
        .swal2-confirm {
            background: linear-gradient(135deg, #ff8f04 0%, #ff6f00 100%) !important;
            color: #ffffff !important;
            border: none !important;
            border-radius: 50px !important;
            padding: 12px 32px !important;
            font-weight: 600 !important;
            font-family: 'Prompt', sans-serif !important;
            box-shadow: 0 4px 20px rgba(255, 143, 4, 0.4) !important;
            transition: all 0.3s ease !important;
            font-size: 1rem !important;
        }

        .swal2-confirm:hover {
            background: linear-gradient(135deg, #ff6f00 0%, #e65100 100%) !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 25px rgba(255, 143, 4, 0.6) !important;
        }

        .swal2-confirm:focus {
            box-shadow: 0 0 0 4px rgba(255, 143, 4, 0.3) !important;
        }

        /* Cancel Button - Dark Theme */
        .swal2-cancel {
            background: linear-gradient(135deg, #1a1a1a 0%, #333333 100%) !important;
            color: #ff8f04 !important;
            border: 2px solid #ff8f04 !important;
            border-radius: 50px !important;
            padding: 12px 32px !important;
            font-weight: 600 !important;
            font-family: 'Prompt', sans-serif !important;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2) !important;
            transition: all 0.3s ease !important;
            font-size: 1rem !important;
        }

        .swal2-cancel:hover {
            background: linear-gradient(135deg, #ffffff 0%, #f5f5f5 100%) !important;
            color: #000000 !important;
            border-color: #000000 !important;
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3) !important;
        }

        .swal2-cancel:focus {
            box-shadow: 0 0 0 4px rgba(255, 143, 4, 0.2) !important;
        }

        /* Icon Colors */
        .swal2-icon.swal2-success {
            border-color: #ff8f04 !important;
            color: #ff8f04 !important;
        }

        .swal2-success-ring {
            border-color: rgba(255, 143, 4, 0.3) !important;
        }

        .swal2-icon.swal2-success [class^='swal2-success-line'] {
            background-color: #ff8f04 !important;
        }

        .swal2-icon.swal2-error {
            border-color: #dc3545 !important;
        }

        .swal2-icon.swal2-error [class^='swal2-x-mark-line'] {
            background-color: #dc3545 !important;
        }

        .swal2-icon.swal2-warning {
            border-color: #ffad42 !important;
            color: #ffad42 !important;
        }

        .swal2-icon.swal2-info {
            border-color: #ff8f04 !important;
            color: #ff8f04 !important;
        }

        .swal2-icon.swal2-question {
            border-color: #ff8f04 !important;
            color: #ff8f04 !important;
        }

        /* Loading Spinner */
        .swal2-loader {
            border-color: #ff8f04 transparent #ff8f04 transparent !important;
        }

        /* Progress Steps */
        .swal2-progress-steps .swal2-progress-step {
            background: #ff8f04 !important;
        }

        .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step {
            background: #ff6f00 !important;
        }

        .swal2-progress-steps .swal2-progress-step-line {
            background: rgba(255, 143, 4, 0.3) !important;
        }

        /* Close Button */
        .swal2-close {
            color: #666 !important;
            transition: all 0.3s ease !important;
        }

        .swal2-close:hover {
            color: #ff8f04 !important;
        }

        /* Input Fields in SweetAlert */
        .swal2-input,
        .swal2-textarea {
            border: 2px solid #e0e0e0 !important;
            border-radius: 12px !important;
            font-family: 'Prompt', sans-serif !important;
            transition: all 0.3s ease !important;
        }

        .swal2-input:focus,
        .swal2-textarea:focus {
            border-color: #ff8f04 !important;
            box-shadow: 0 0 0 4px rgba(255, 143, 4, 0.15) !important;
        }

        /* Footer */
        .swal2-footer {
            border-top: 1px solid rgba(255, 143, 4, 0.2) !important;
            color: #666 !important;
            font-family: 'Prompt', sans-serif !important;
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="header-modern container-fluid d-flex flex-column justify-content-center align-items-center">
            <img src="https://img2.pic.in.th/pic/1730737040513.png" alt="Thailand Locksmith Logo"
                style="width: 100px; max-height: 100px;" class="img-fluid mb-3">
            <div class="h3 lh-base fw-bold w-100 header-text text-center">ลงทะเบียนเข้าร่วมงาน<br>THAILAND LOCKSMITH
                2025
            </div>
        </header>
        <main class="container-fluid">
            <section id="page1" class="pages d-none">
                <div class="card-modern">
                    <form id="search-form" class="needs-validation" novalidate>
                        <div class="text-center mb-4">
                            <i class="bi bi-user fs-1" style="color: #ff8f04;"></i>
                            <p class="text-dark">กรอกรหัสลูกค้าหรือเบอร์โทรศัพท์ของคุณ เพื่อตรวจสอบการลงทะเบียน</p>
                        </div>
                        <div class="row g-4">
                            <div class="col-12">
                                <div class="row g-3 align-items-center">
                                    <div class="col-12">
                                        <input type="text" class="form-control text-center form-control-lg"
                                            id="search-input" name="search-input"
                                            placeholder="กรอกรหัสลูกค้า หรือ เบอร์โทรศัพท์" required autofocus>
                                        <div class="invalid-feedback text-center">
                                            กรุณากรอกรหัสลูกค้าหรือเบอร์โทรศัพท์
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="submit-btn fs-5">
                                    <i class="bi bi-search me-2"></i>ค้นหา
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </section>
            <section id="page2" class="pages d-none">
                <div class="card-modern">
                    <form id="id-checker" class="needs-validation" novalidate>
                        <div class="text-center mb-4">
                            <i class="bi bi-person-badge fs-1" style="color: #ff8f04;"></i>
                            <h4 class="mt-2" style="color: #000000; font-weight: 700;">ตรวจสอบรหัสลูกค้า</h4>
                        </div>
                        <div class="row g-4">
                            <div class="col-12">
                                <div class="row g-3 align-items-center">
                                    <div class="col-12">
                                        <label for="check-id" class="form-label">รหัสลูกค้าผลเลิศ</label>
                                        <input type="text" class="form-control text-center form-control-lg"
                                            id="check-id" name="check-id" placeholder="กรอกรหัสลูกค้าของคุณ" required>
                                        <div class="invalid-feedback text-center">
                                            กรุณากรอกรหัสลูกค้า
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 text-center">
                                <button type="submit" class="submit-btn fs-5">
                                    ตรวจสอบ
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="card-modern d-none" id="member-form-card">
                    <form id="member-form" class="needs-validation" novalidate>
                        <div class="text-center mb-4">
                            <i class="bi bi-person-check-fill fs-1" style="color: #ff8f04;"></i>
                            <h4 class="mt-2" style="color: #000000; font-weight: 700;" id="member-form-title">
                                กรอกข้อมูลลงทะเบียน</h4>
                        </div>
                        <div class="row g-3">
                            <div class="col-12">
                                <label for="member-id" class="form-label"><i
                                        class="bi bi-card-text me-2"></i>รหัสลูกค้า</label>
                                <input type="text" class="form-control" id="member-id" name="member-id" readonly>
                            </div>
                            <div class="col-12">
                                <label for="name" class="form-label"><i
                                        class="bi bi-person-fill me-2"></i>ชื่อ-นามสกุล</label>
                                <input type="text" class="form-control" id="name" name="name"
                                    placeholder="ระบุชื่อ-นามสกุล" required>
                                <div class="invalid-feedback">
                                    กรุณากรอกชื่อ-นามสกุล
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="province" class="form-label"><i
                                        class="bi bi-geo-alt-fill me-2"></i>จังหวัด</label>
                                <input type="text" class="form-control" id="province" name="province"
                                    placeholder="ระบุจังหวัด" required>
                                <div class="invalid-feedback">
                                    กรุณากรอกจังหวัด
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="phone" class="form-label"><i
                                        class="bi bi-telephone-fill me-2"></i>เบอร์โทรศัพท์</label>
                                <input type="tel" class="form-control" id="phone" name="phone" placeholder="0812345678"
                                    required>
                                <div class="invalid-feedback">
                                    กรุณากรอกเบอร์โทรศัพท์
                                </div>
                            </div>
                        </div>

                        <div class="form-section-title w-100 mt-4">
                            <i class="bi bi-calendar-event me-2"></i>วันที่สนใจเข้าร่วมงาน
                        </div>
                        <div class="mt-3">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date1"
                                    value="วันเสาร์ที่ 13 ธันวาคม 2568" required>
                                <label class="form-check-label" for="date1">
                                    <strong>วันเสาร์ที่ 13 ธันวาคม 2568</strong>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date2"
                                    value="วันอาทิตย์ที่ 14 ธันวาคม 2568" required>
                                <label class="form-check-label" for="date2">
                                    <strong>วันอาทิตย์ที่ 14 ธันวาคม 2568</strong>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date3"
                                    value="เข้าร่วมทั้ง 2 วัน" required>
                                <label class="form-check-label" for="date3">
                                    <strong>เข้าร่วมทั้ง 2 วัน</strong> <span
                                        class="badge bg-warning text-dark ms-2">แนะนำ</span>
                                </label>
                                <small class="form-text d-block mt-2 text-center text-md-start">(2
                                    วันที่จะยกระดับความเชี่ยวชาญในอาชีพของคุณ)</small>
                                <div class="invalid-feedback">
                                    กรุณาเลือกวันที่สนใจเข้าร่วมงาน
                                </div>
                            </div>
                        </div>

                        <div class="mt-4">
                            <label for="follower" class="form-label">
                                <i class="bi bi-person-plus-fill me-2"></i>ผู้ติดตาม (ถ้ามี)
                            </label>
                            <input type="text" class="form-control" id="follower" name="follower"
                                placeholder="ระบุชื่อ-นามสกุลผู้ติดตาม (ถ้ามี)">
                            <small class="form-text d-block mt-1">(ตรวจสอบโดยอ้างอิงจากบัตรประชาชน)</small>
                        </div>

                        <div class="text-center mt-4">
                            <button type="submit" class="submit-btn fs-5">
                                <i class="bi bi-check-circle me-2"></i>สมัครลงทะเบียน
                            </button>
                        </div>
                    </form>
                </div>
            </section>
            <section id="page3" class="pages d-none">
                <div class="card-modern">
                    <form id="guest-form" class="needs-validation" novalidate>
                        <div class="text-center mb-4">
                            <i class="bi bi-person-plus-fill fs-1" style="color: #ff8f04;"></i>
                            <h4 class="mt-2" style="color: #000000; font-weight: 700;" id="guest-form-title">
                                ลงทะเบียนผู้เข้าร่วมงานทั่วไป
                            </h4>
                        </div>

                        <div class="row g-3">
                            <div class="col-12">
                                <label for="guest-name" class="form-label"><i
                                        class="bi bi-person-fill me-2"></i>ชื่อ-นามสกุล</label>
                                <input type="text" class="form-control" id="guest-name" name="guest-name"
                                    placeholder="ระบุชื่อ-นามสกุล" required>
                                <div class="invalid-feedback">
                                    กรุณากรอกชื่อ-นามสกุล
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="guest-province" class="form-label"><i
                                        class="bi bi-geo-alt-fill me-2"></i>จังหวัด</label>
                                <input type="text" class="form-control" id="guest-province" name="guest-province"
                                    placeholder="ระบุจังหวัด" required>
                                <div class="invalid-feedback">
                                    กรุณากรอกจังหวัด
                                </div>
                            </div>
                            <div class="col-12">
                                <label for="guest-phone" class="form-label"><i
                                        class="bi bi-telephone-fill me-2"></i>เบอร์โทรศัพท์</label>
                                <input type="tel" class="form-control" id="guest-phone" name="guest-phone"
                                    placeholder="0812345678" required>
                                <div class="invalid-feedback">
                                    กรุณากรอกเบอร์โทรศัพท์
                                </div>
                            </div>

                            <div class="col-12">
                                <label class="form-label"><i class="bi bi-tools me-2"></i>อาชีพ</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc1"
                                        value="ช่างกุญแจ" required>
                                    <label class="form-check-label" for="oc1">ช่างกุญแจ</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc2"
                                        value="ช่างมอเตอร์ไซค์" required>
                                    <label class="form-check-label" for="oc2">ช่างมอเตอร์ไซค์</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc3"
                                        value="ช่างซ่อมรถยนต์" required>
                                    <label class="form-check-label" for="oc3">ช่างซ่อมรถยนต์</label>
                                </div>
                                <div class="invalid-feedback">
                                    กรุณาเลือกอาชีพอย่างน้อย 1 อย่าง
                                </div>
                            </div>

                            <div class="col-12">
                                <label for="guest-interest" class="form-label"><i
                                        class="bi bi-bag-fill me-2"></i>สินค้าที่สนใจ</label>
                                <select class="form-control" id="guest-interest" name="guest-interest" required>
                                    <option value="">-- เลือกสินค้าที่สนใจ --</option>
                                    <option value="เครื่องตัดกุญแจอัตโนมัติ">เครื่องตัดกุญแจอัตโนมัติ</option>
                                    <option value="เครื่องตัดกุญแจมาตรฐาน">เครื่องตัดกุญแจมาตรฐาน</option>
                                    <option value="อุปกรณ์ช่างกุญแจ">อุปกรณ์ช่างกุญแจ</option>
                                    <option value="เครื่องโปรแกรมชิพและรีโมท">เครื่องโปรแกรมชิพและรีโมท</option>
                                </select>
                                <div class="invalid-feedback">
                                    กรุณาเลือกสินค้าที่สนใจ
                                </div>
                            </div>
                        </div>

                        <div class="form-section-title w-100 mt-4">
                            <i class="bi bi-calendar-event me-2"></i>วันที่สนใจเข้าร่วมงาน
                        </div>
                        <div class="mt-3">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="gdate1"
                                    value="วันเสาร์ที่ 13 ธันวาคม 2568" required>
                                <label class="form-check-label" for="gdate1">
                                    <strong>วันเสาร์ที่ 13 ธันวาคม 2568</strong>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="gdate2"
                                    value="วันอาทิตย์ที่ 14 ธันวาคม 2568" required>
                                <label class="form-check-label" for="gdate2">
                                    <strong>วันอาทิตย์ที่ 14 ธันวาคม 2568</strong>
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="gdate3"
                                    value="เข้าร่วมทั้ง 2 วัน" required>
                                <label class="form-check-label" for="gdate3">
                                    <strong>เข้าร่วมทั้ง 2 วัน</strong> <span
                                        class="badge bg-warning text-dark ms-2">แนะนำ</span>
                                </label>
                                <small class="form-text d-block mt-2 text-center text-md-start">(2
                                    วันที่จะยกระดับความเชี่ยวชาญในอาชีพของคุณ)</small>
                                <div class="invalid-feedback">
                                    กรุณาเลือกวันที่สนใจเข้าร่วมงาน
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button type="submit" class="submit-btn fs-5">
                                <i class="bi bi-check-circle me-2"></i>สมัครลงทะเบียน
                            </button>
                        </div>
                    </form>
                </div>
            </section>
        </main>
    </div>
    <script>
        const scriptUrl = 'https://script.google.com/macros/s/AKfycbxeQVWU7m3laqQowhev9487Ize_SAW8zy7qj-IlneYSz-DHwUBMnpb73CTnVc9ADFg/exec'
        const LIFF_ID = '1656187634-ZVB4KEdw'
        var folder_token_obj, auth_users
        $(document).ready(function () {
            let page = new URLSearchParams(window.location.search).get('p');
            page = page == null ? 1 : page;
            if (page) {
                changePage(page);
            }
            $.LoadingOverlay("show");
            liff.init({
                liffId: LIFF_ID,
                withLoginOnExternalBrowser: true
            })
            liff.ready.then(() => {
                // console.log(liff.getContext());
                // if (liff.getOS() != 'android' && liff.getContext().type != 'external') {
                //     liff.openWindow({ url: liff.getContext().endpointUrl, external: true })
                //     liff.closeWindow()
                // }
                initApp();
                console.log('liff ready');

            });
            $('[name="guest-occupation"]').on('change', function () {
                let checked = $('[name="guest-occupation"]:checked').length
                if (checked == 0) {
                    $('[name="guest-occupation"]').prop('required', true)
                } else {
                    $('[name="guest-occupation"]').prop('required', false)
                }
            })
        });
        function changePage(page) {
            $('.pages').addClass('d-none');
            $('#page' + page).removeClass('d-none');

            // Focus on search input when page 1 is shown
            if (page == 1) {
                setTimeout(() => {
                    $('#search-input').focus();
                }, 100);
            }
        }

        function initApp() {
            // Focus on search input when app initializes on page 1
            if ($('#page1').is(':visible') || !$('#page1').hasClass('d-none')) {
                setTimeout(() => {
                    $('#search-input').focus();
                }, 200);
            }

            let debounceTimer;
            $('#search-input').on('input', function () {
                clearTimeout(debounceTimer);
                const input = this;
                debounceTimer = setTimeout(function () {
                    input.value = input.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
                }, 100);
            });
            checkRegist();
        }

        function checkRegist() {
            $.post(scriptUrl, { opt: 'checkRegist', uid: liff.getContext().userId }, function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                if (res.status == 'already registed') {
                    changePage(2);
                    showMemberData(res);
                }
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            })
        }

        function searchCustomer() {
            let searchValue = $('#search-input').val().trim()
            console.log("🚀 ~ searchCustomer ~ searchValue:", searchValue)
            if (searchValue == '') {
                return Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณากรอกรหัสลูกค้าหรือเบอร์โทรศัพท์',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            }
            if (!/^[a-zA-Z]{2,3}\d{4,6}$/.test(searchValue) && !/^\d{9,10}$/.test(searchValue)) {
                return Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณากรอกข้อมูลให้ถูกต้อง (รหัสลูกค้า หรือ เบอร์โทรศัพท์)',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            }
            $.LoadingOverlay("show");
            $.post(scriptUrl, { opt: 'searchCustomer', searchValue: searchValue, uid: liff.getContext().userId }, function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                if (res.status == 'not found') {
                    // ไม่พบข้อมูล ไปหน้าลงทะเบียนลูกค้าใหม่
                    Swal.fire({
                        icon: 'info',
                        title: 'ไม่พบข้อมูลลูกค้า',
                        text: 'จะพาคุณไปยังหน้าลงทะเบียนลูกค้าใหม่',
                        confirmButtonText: 'ดำเนินการต่อ',
                        allowOutsideClick: false,
                        timer: 2000,
                        timerProgressBar: true,
                        customClass: {
                            popup: 'rounded-4'
                        }
                    }).then((result) => {
                        changePage(3); // ไปหน้าลงทะเบียนลูกค้าใหม่
                    })
                    return;
                } else if (res.status == 'already registed uid') {
                    // ลงทะเบียนแล้ว
                    // ลงทะเบียนโดยคนอื่น
                    Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        html: '<div style="line-height: 1.8;">' +
                            '<strong style="color: #dc3545; font-size: 1.1em;">บัญชีไลน์นี้ได้ลงทะเบียนแล้ว</strong><br>' +
                            '<span style="color: #333;">โดยใช้รหัสลูกค้าอื่น</span><br><br>' +
                            '<div style="background: #fff3cd; padding: 15px; border-radius: 12px; border-left: 4px solid #ffc107; margin: 10px 0;">' +
                            '<i class="bi bi-exclamation-triangle-fill" style="color: #ff8f04;"></i> ' +
                            '<span style="color: #333;">กรุณาตรวจสอบข้อมูลอีกครั้ง</span>' +
                            '</div>' +
                            '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 12px; border-radius: 12px; border: 2px solid #ff8f04; margin-top: 10px;">' +
                            '<i class="bi bi-info-circle-fill" style="color: #ff8f04;"></i> ' +
                            '<span style="color: #333;">หากต้องการเปลี่ยนแปลงข้อมูล<br>กรุณาติดต่อฝ่ายบริการลูกค้า<br><a href="tel:0982299149" style="color: #ff8f04; font-weight: 600; text-decoration: none;"><i class="bi bi-telephone-fill"></i> 098-229-9149</a></span>' +
                            '</div>' +
                            '</div>',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false,
                        customClass: {
                            popup: 'rounded-4'
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            changePage(1); // กลับไปหน้าค้นหา
                        }
                    })
                    return;
                } else if (res.status == 'already registed customerId') {
                    // ลงทะเบียนแล้ว
                    Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        html: '<div style="line-height: 1.8;">' +
                            '<strong style="color: #dc3545; font-size: 1.1em;">รหัสลูกค้านี้ได้ลงทะเบียนแล้ว</strong><br>' +
                            '<span style="color: #333;">โดยใช้บัญชีไลน์อื่น</span><br><br>' +
                            '<div style="background: #fff3cd; padding: 15px; border-radius: 12px; border-left: 4px solid #ffc107; margin: 10px 0;">' +
                            '<i class="bi bi-exclamation-triangle-fill" style="color: #ff8f04;"></i> ' +
                            '<span style="color: #333;">กรุณาตรวจสอบข้อมูลอีกครั้ง</span>' +
                            '</div>' +
                            '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 12px; border-radius: 12px; border: 2px solid #ff8f04; margin-top: 10px;">' +
                            '<i class="bi bi-info-circle-fill" style="color: #ff8f04;"></i> ' +
                            '<span style="color: #333;">หากต้องการเปลี่ยนแปลงข้อมูล<br>กรุณาติดต่อฝ่ายบริการลูกค้า<br><a href="tel:0982299149" style="color: #ff8f04; font-weight: 600; text-decoration: none;"><i class="bi bi-telephone-fill"></i> 098-229-9149</a></span>' +
                            '</div>' +
                            '</div>',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false,
                        customClass: {
                            popup: 'rounded-4'
                        }
                    }).then((result) => {
                        if (result.isConfirmed) {
                            changePage(1); // กลับไปหน้าค้นหา
                        }
                    })
                    return
                }
                // เจอข้อมูล ไปหน้าตรวจสอบข้อมูลลูกค้า
                changePage(2);
                $('#check-id').val(res.member_id || searchValue);
                // เรียกฟังก์ชันตรวจสอบข้อมูลทันที
                setTimeout(() => {
                    showMemberData(res);
                }, 500);
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            })
        }

        function showMemberData(data) {
            console.log("🚀 ~ showMemberData ~ data:", data)
            if (data.uid === '') {
                showMemberDataValid(data)
                // รหัสลูกค้าถูกต้อง
                return;
            }

            handleAlreadyRegistered(data)

        }

        function showMemberDataValid(data) {
            $('#id-checker').closest('.card-modern').addClass('d-none')
            $('#member-form-card').removeClass('d-none')
            $('#member-id').val(data['รหัสลูกค้า'] || data.member_id)
            $('#name').val(data['ชื่อ นามสกุล'] || data.name)
            $('#province').val(data['จังหวัด'] || data.province)
            $('#phone').val(data['เบอร์โทร'] || data.phone)
        }

        function handleAlreadyRegistered(data) {
            const isGuest = data['member_id'].match(/^[a-zA-Z]{2,3}\d{4,6}$/) ? false : true;
            Swal.fire({
                icon: 'success',
                title: 'คุณได้ลงทะเบียนเข้าร่วมงานแล้ว',
                html: '<div style="line-height: 1.8;">' +
                    '<strong style="color: #ff8f04; font-size: 1.1em;">ขอบคุณที่ลงทะเบียนเข้าร่วมงาน</strong><br>' +
                    '<span style="color: #000000; font-weight: 600;">THAILAND LOCKSMITH 2025</span><br><br>' +
                    '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 15px; border-radius: 12px; border-left: 4px solid #ff8f04; margin: 10px 0;">' +
                    '<i class="bi bi-info-circle-fill" style="color: #ff8f04;"></i> ' +
                    '<span style="color: #333;">หากต้องการเปลี่ยนแปลงข้อมูล<br>กรุณาติดต่อฝ่ายบริการลูกค้า<br><a href="tel:0982299149" style="color: #ff8f04; font-weight: 600; text-decoration: none;"><i class="bi bi-telephone-fill"></i> 098-229-9149</a></span>' +
                    '</div>' +
                    '</div>',
                confirmButtonText: 'ปิด',
                allowOutsideClick: false,
                customClass: {
                    popup: 'rounded-4'
                }
            })


            if (isGuest) {
                $('#guest-form-title').html('ข้อมูลการลงทะเบียน<br><span style="font-size: 0.9em; color: #666;">(ผู้เข้าร่วมงานทั่วไป)</span>')
                $('#guest-form input, #guest-form button').prop('disabled', true)
                $('#guest-form #guest-name').val(data['ชื่อ นามสกุล'] || data.name)
                $('#guest-form #guest-province').val(data['จังหวัด'] || data.province)
                $('#guest-form #guest-phone').val(data['เบอร์โทร'] || data.phone)
                $('[name="guest-occupation"]').each(function () {
                    if (data['อาชีพ'] && data['อาชีพ'].includes($(this).val())) {
                        $(this).prop('checked', true)
                    }
                    $(this).prop('disabled', true)
                })
                $('#guest-form #guest-interest').replaceWith($('<input type="text" class="form-control" id="guest-interest" name="guest-interest" value="' + (data['สินค้าที่สนใจ'] || data.interest) + '" readonly>'))
                $('[name="date"]').each(function () {
                    if ($(this).val() == data['ลงทะเบียนเข้างานวันที่'] || data.visit_date) {
                        console.log('checked', $(this).val());
                        $(this).prop('checked', true)
                    }
                    $(this).prop('disabled', true)
                })
                $('#guest-form button').html('<i class="bi bi-check-circle me-2"></i>ลงทะเบียนแล้ว')
                $('<button type="button" class="btn btn-card btn-gold w-100 mt-3" onclick="requestNewPass(\'' + data.member_id + '\')"><i class="bi bi-arrow-clockwise me-2"></i>ขอบัตรเข้างานใหม่</button>').insertAfter('#guest-form button')
                changePage(3)
            } else {
                $('#member-form-title').html('ข้อมูลการลงทะเบียน<br><span style="font-size: 0.9em; color: #666;">(ลูกค้าผลเลิศ)</span>')
                $('#id-checker').closest('.card-modern').addClass('d-none')
                $('#member-form-card').removeClass('d-none')
                $('#member-id').val(data['รหัสลูกค้า'] || data.member_id)
                $('#name').val(data['ชื่อ นามสกุล'] || data.name)
                $('#province').val(data['จังหวัด'] || data.province)
                $('#phone').val(data['เบอร์โทร'] || data.phone)
                $('[name="date"]').each(function () {
                    if ($(this).val() == data['ลงทะเบียนเข้างานวันที่'] || data['visit-date']) {
                        console.log('checked', $(this).val());
                        $(this).prop('checked', true)
                    }
                    $(this).prop('disabled', true)
                })
                $('#follower').val(data['ผู้ติดตาม'] || data.follower)
                $('#member-form input, #member-form button').prop('disabled', true)
                $('#member-form button').html('<i class="bi bi-check-circle me-2"></i>ลงทะเบียนแล้ว')
                $('<button type="button" class="btn btn-card btn-gold w-100 mt-3" onclick="requestNewPass(\'' + data.member_id + '\')"><i class="bi bi-arrow-clockwise me-2"></i>ขอบัตรเข้างานใหม่</button>').insertAfter('#member-form button')
            }
        }

        function requestNewPass(member_id) {
            console.log("🚀 ~ requestNewPass ~ member_id:", member_id)
            Swal.fire({
                icon: 'question',
                title: 'ต้องการขอบัตรเข้างานใหม่?',
                text: 'ระบบจะส่งบัตรเข้างานใหม่ไปยังช่องแชทของคุณ',
                showCancelButton: true,
                confirmButtonText: 'ยืนยัน',
                cancelButtonText: 'ยกเลิก',
                allowOutsideClick: false,
                customClass: {
                    popup: 'rounded-4'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    if (member_id.match(/^[a-zA-Z]{2,3}\d{4,6}$/)) {
                        sendMessage('member', { member_id: member_id, name: $('#name').val(), follower: $('#member-form #follower').val() })
                    } else {
                        sendMessage('guest', { guest_id: member_id, name: $('#guest-name').val() })
                    }
                }
            })
        }

        function submitMemberForm() {
            $.LoadingOverlay("show");
            let data = {
                member_id: $('#member-form #member-id').val(),
                name: $('#member-form #name').val(),
                province: $('#member-form #province').val(),
                phone: $('#member-form #phone').val(),
                date: $('#member-form input[name=date]:checked').val(),
                follower: $('#member-form #follower').val(),
                uid: liff.getContext().userId,
                opt: 'memberRegist'
            }
            console.log(data);
            $.post(scriptUrl, data, function (res) {
                $.LoadingOverlay("hide");
                console.log(res);
                if (!res.status || res.status != 'success') {
                    return Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        text: res.message || 'กรุณาลองใหม่อีกครั้ง',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false,
                        customClass: {
                            popup: 'rounded-4'
                        }
                    })
                }
                sendMessage('member', data, false)
                Swal.fire({
                    icon: 'success',
                    title: 'ลงทะเบียนสำเร็จ',
                    html: '<div style="line-height: 1.8;">' +
                        '<strong style="color: #ff8f04; font-size: 1.1em;">ขอบคุณที่ลงทะเบียนเข้าร่วมงาน</strong><br>' +
                        '<span style="color: #000000; font-weight: 600;">THAILAND LOCKSMITH 2025</span><br><br>' +
                        '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 15px; border-radius: 12px; border-left: 4px solid #ff8f04; margin: 10px 0;">' +
                        '<i class="bi bi-ticket-perforated" style="color: #ff8f04; font-size: 1.2em;"></i> ' +
                        '<span style="color: #333;">ระบบจะส่งบัตรเข้างานไปยังช่องแชทของคุณ</span>' +
                        '</div>' +
                        '<div style="background: #fff3cd; padding: 12px; border-radius: 12px; border: 2px solid #ffad42; margin-top: 10px;">' +
                        '<i class="bi bi-exclamation-triangle-fill" style="color: #ff8f04;"></i> ' +
                        '<strong style="color: #000;">โปรดแสดงบัตรนี้พร้อมบัตรประชาชนก่อนเข้างาน</strong>' +
                        '</div>' +
                        '</div>',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        liff.closeWindow()
                    }
                })
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            })
        }

        function submitGuestForm() {
            $.LoadingOverlay("show");
            let data = {
                name: $('#guest-form #guest-name').val(),
                province: $('#guest-form #guest-province').val(),
                phone: $('#guest-form #guest-phone').val(),
                occupation: $('#guest-form input[name=guest-occupation]:checked').map(function () {
                    return this.value
                }).get().join(', '),
                interest: $('#guest-form #guest-interest').val(),
                date: $('#guest-form input[name=date]:checked').val(),
                uid: liff.getContext().userId,
                opt: 'guestRegist'
            }
            console.log(data);
            $.post(scriptUrl, data, function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                if (res.status == 'already register') {
                    return Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        text: 'คุณได้ลงทะเบียนเข้าร่วมงานแล้ว',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false,
                        customClass: {
                            popup: 'rounded-4'
                        }
                    })
                }
                data.guest_id = res.guest_id
                sendMessage('guest', data, false)
                Swal.fire({
                    icon: 'success',
                    title: 'ลงทะเบียนสำเร็จ',
                    html: '<div style="line-height: 1.8;">' +
                        '<strong style="color: #ff8f04; font-size: 1.1em;">ขอบคุณที่ลงทะเบียนเข้าร่วมงาน</strong><br>' +
                        '<span style="color: #000000; font-weight: 600;">THAILAND LOCKSMITH 2025</span><br><br>' +
                        '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 15px; border-radius: 12px; border-left: 4px solid #ff8f04; margin: 10px 0;">' +
                        '<i class="bi bi-ticket-perforated" style="color: #ff8f04; font-size: 1.2em;"></i> ' +
                        '<span style="color: #333;">ระบบจะส่งบัตรเข้างานไปยังช่องแชทของคุณ</span>' +
                        '</div>' +
                        '<div style="background: #fff3cd; padding: 12px; border-radius: 12px; border: 2px solid #ffad42; margin-top: 10px;">' +
                        '<i class="bi bi-exclamation-triangle-fill" style="color: #ff8f04;"></i> ' +
                        '<strong style="color: #000;">โปรดแสดงบัตรนี้พร้อมบัตรประชาชนก่อนเข้างาน</strong>' +
                        '</div>' +
                        '</div>',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        liff.closeWindow()
                    }
                })
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                })
            })
        }

        function sendMessage(type, data, showAlert = true) {
            // let flex = {
            //     "type": "bubble",
            //     "size": "giga",
            //     "body": {
            //         "type": "box",
            //         "layout": "vertical",
            //         "contents": [
            //             {
            //                 "type": "image",
            //                 "url": "https://img5.pic.in.th/file/secure-sv1/19ccefa47a4401aaa68370c059a53f20.jpg",
            //                 "size": "full",
            //                 "aspectMode": "cover",
            //                 "aspectRatio": "1:1",
            //                 "gravity": "top"
            //             },
            //             {
            //                 "type": "box",
            //                 "layout": "vertical",
            //                 "contents": [
            //                     {
            //                         "type": "text",
            //                         "text": type === 'member' ? data.member_id || 'None' : data.guest_id || 'None',
            //                         "color": "#000000",
            //                         "align": "center",
            //                         "size": "xxl",
            //                         "weight": "bold"
            //                     }
            //                 ],
            //                 "position": "absolute",
            //                 "offsetTop": "184px",
            //                 "offsetStart": "15px",
            //                 "height": "40px",
            //                 "width": "190px",
            //                 "justifyContent": "center",
            //                 "alignItems": "center"
            //             },
            //             {
            //                 "type": "box",
            //                 "layout": "vertical",
            //                 "contents": [
            //                     {
            //                         "type": "text",
            //                         "text": data.name || 'None',
            //                         "color": "#FFFFFF",
            //                         "align": "center",
            //                         "size": "lg",
            //                         "weight": "bold",
            //                         "adjustMode": "shrink-to-fit"
            //                     }
            //                 ],
            //                 "position": "absolute",
            //                 "offsetTop": "225px",
            //                 "offsetStart": "15px",
            //                 "height": "40px",
            //                 "width": "190px",
            //                 "justifyContent": "center"
            //             },
            //             {
            //                 "type": "box",
            //                 "layout": "vertical",
            //                 "contents": [
            //                     {
            //                         "type": "image",
            //                         "url": "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(type === 'member' ? data.member_id || 'None' : data.guest_id || 'None'),
            //                         "aspectMode": "cover",
            //                         "size": "full"
            //                     }
            //                 ],
            //                 "position": "absolute",
            //                 "offsetTop": "210px",
            //                 "offsetStart": "230px",
            //                 "borderColor": "#FFFFFF",
            //                 "borderWidth": "medium",
            //                 "width": "130px",
            //                 "height": "130px",
            //                 "cornerRadius": "md",
            //                 "paddingAll": "sm",
            //                 "backgroundColor": "#FFFFFF"
            //             }
            //         ],
            //         "paddingAll": "0px"
            //     }
            // }

            let flex = {
                "type": "bubble",
                "size": "giga",
                "body": {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                        {
                            "type": "image",
                            "url": "https://img5.pic.in.th/file/secure-sv1/19ccefa47a4401aaa68370c059a53f20.jpg",
                            "size": "full",
                            "aspectMode": "cover",
                            "aspectRatio": "1:1",
                            "gravity": "top"
                        },
                        {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                {
                                    "type": "text",
                                    "text": type === 'member' ? data.member_id || 'None' : data.guest_id || 'None',
                                    "color": "#000000",
                                    "align": "center",
                                    "size": "xxl",
                                    "weight": "bold",
                                    "scaling": false
                                }
                            ],
                            "position": "absolute",
                            "offsetTop": "46.5%",
                            "offsetStart": "3%",
                            "height": "40px",
                            "width": "190px",
                            "justifyContent": "center",
                            "alignItems": "center"
                        },
                        {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                {
                                    "type": "text",
                                    "text": data.name || 'None',
                                    "color": "#FFFFFF",
                                    "align": "center",
                                    "size": "lg",
                                    "weight": "bold",
                                    "adjustMode": "shrink-to-fit",
                                    "scaling": false
                                }
                            ],
                            "position": "absolute",
                            "offsetTop": "57%",
                            "offsetStart": "4%",
                            "height": "40px",
                            "width": "190px",
                            "justifyContent": "center"
                        },
                        {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                {
                                    "type": "image",
                                    "url": "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" + encodeURIComponent(type === 'member' ? data.member_id || 'None' : data.guest_id || 'None'),
                                    "aspectMode": "cover",
                                    "size": "full"
                                }
                            ],
                            "position": "absolute",
                            "offsetTop": "53%",
                            "offsetStart": "58%",
                            "borderColor": "#FFFFFF",
                            "borderWidth": "medium",
                            "width": "130px",
                            "height": "130px",
                            "cornerRadius": "md",
                            "paddingAll": "sm",
                            "backgroundColor": "#FFFFFF"
                        }
                    ],
                    "paddingAll": "0px"
                }
            }
            if (data.follower && data.follower != '') {
                let follower_contents = [
                    {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [
                            {
                                "type": "text",
                                "text": "&",
                                "color": "#FFFFFF",
                                "align": "center",
                                "size": "lg",
                                "weight": "bold"
                            }
                        ],
                        "position": "absolute",
                        "offsetTop": "67%",
                        "offsetStart": "4%",
                        "height": "40px",
                        "width": "190px",
                        "justifyContent": "center"
                    },
                    {
                        "type": "box",
                        "layout": "vertical",
                        "contents": [
                            {
                                "type": "text",
                                "text": data.follower || 'None',
                                "color": "#FFFFFF",
                                "align": "center",
                                "size": "lg",
                                "weight": "bold",
                                "adjustMode": "shrink-to-fit",
                                "scaling": false
                            }
                        ],
                        "position": "absolute",
                        "offsetTop": "76%",
                        "offsetStart": "4%",
                        "height": "40px",
                        "width": "190px",
                        "justifyContent": "center"
                    },
                ]
                flex.body.contents.splice(3, 0, ...follower_contents);
            }
            liff.sendMessages([{
                "type": "flex",
                "altText": "ลงทะเบียนสำเร็จ",
                "contents": flex
            }]).then((e) => {
                console.log(e);
                if (!showAlert) return;
                Swal.fire({
                    icon: 'success',
                    title: 'ส่งบัตรเข้างานสำเร็จ',
                    html: '<div style="line-height: 1.8;">' +
                        '<div style="background: linear-gradient(135deg, #fff5e6 0%, #ffe4cc 100%); padding: 15px; border-radius: 12px; border-left: 4px solid #ff8f04; margin: 10px 0;">' +
                        '<i class="bi bi-ticket-perforated" style="color: #ff8f04; font-size: 1.2em;"></i> ' +
                        '<span style="color: #333;">กรุณาตรวจสอบบัตรเข้างานได้ที่ช่องแชทของคุณ</span>' +
                        '</div>' +
                        '<div style="background: #fff3cd; padding: 12px; border-radius: 12px; border: 2px solid #ffad42; margin-top: 10px;">' +
                        '<i class="bi bi-exclamation-triangle-fill" style="color: #ff8f04;"></i> ' +
                        '<strong style="color: #000;">โปรดแสดงบัตรนี้พร้อมบัตรประชาชนก่อนเข้างาน</strong>' +
                        '</div>' +
                        '</div>',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false,
                    customClass: {
                        popup: 'rounded-4'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        liff.closeWindow()
                    }
                })
            }).catch((err) => {
                console.log(err);
            })
        }
    </script>
    <script>
        (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        event.preventDefault()
                        if (!form.checkValidity()) {
                            event.stopPropagation()
                            form.classList.add('was-validated')
                            $(form).find(':invalid').first().focus()
                        } else {
                            if (form.id == 'search-form') return searchCustomer()
                            if (form.id == 'id-checker') return showMemberData()
                            if (form.id == 'member-form') return submitMemberForm()
                            if (form.id == 'guest-form') return submitGuestForm()
                        }
                    }, false)
                })
        })()
    </script>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script>
        // VConsole will be exported to `window.VConsole` by default.
        // var vConsole = new window.VConsole();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</body>

</html>
