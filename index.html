<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- no cache -->
    <meta http-equiv="Cache-Conatrol" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THAILAND LOCKSMITH 2024</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Prompt&display=swap" rel="stylesheet">
    <!-- /icon -->
    <link rel="icon" href="https://img2.pic.in.th/pic/1730737040513.png" type="image/x-icon">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Prompt', sans-serif;
            background-color: #e9e4bf;
        }

        .container {
            max-width: 400px;
        }

        .btn-orange {
            background-color: #f2a137;
            color: #000;
            border: none;
            font-size: 1.1rem;
            /* shadow */
            box-shadow: 0px 5px 0px rgba(192, 93, 16, 1);
        }

        .btn-orange:hover {
            background-color: #c05d10;
            color: #fff;
        }

        .btn-gold {
            background-color: #fcc715;
            color: #000;
            border: none;
            font-size: 1.1rem;
            /* shadow */
            box-shadow: 0px 5px 0px rgba(247, 166, 20, 1);
        }

        .btn-gold:hover {
            background-color: #f7a614;
            color: #fff;
        }

        .circle-orange-with-right-arrow {
            width: 50px;
            height: 50px;
            background-color: #c05d10;
            border-radius: 50%;
            position: relative;
            top: -56px;
            left: calc(100% - 35px);
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 2rem;

        }

        .circle-gold-with-right-arrow {
            width: 50px;
            height: 50px;
            background-color: #f7a614;
            border-radius: 50%;
            position: relative;
            top: -56px;
            left: calc(100% - 35px);
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font-size: 2rem;

        }

        .header-text {
            color: #555555
        }

        .form-control {
            background-color: #aababa;
            color: #000;
            border: none;
            border-radius: 15px
        }

        form label {
            font-size: 1.1rem !important;
            color: #4b4b49
        }


        .form-check-input {
            width: 20px;
            height: 20px;
            margin-right: 10px;
        }

        .submit-btn {
            font-weight: bold;
            color: #333333;
            background: linear-gradient(to bottom, #64e27e, #36b258);
            padding: 15px 30px;
            border: none;
            border-radius: 30px;
            box-shadow: inset 3px 3px 5px rgba(255, 255, 255, 0.5),
                inset -3px -3px 5px rgba(0, 0, 0, 0.2),
                3px 3px 15px rgba(0, 0, 0, 0.3),
                0 0 10px rgba(100, 226, 126, 0.8);
            /* Stronger glow */
            text-align: center;
            line-height: 0.8rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .submit-btn:hover {
            transform: scale(1.05);
            box-shadow: inset 3px 3px 5px rgba(255, 255, 255, 0.5),
                inset -3px -3px 5px rgba(0, 0, 0, 0.2),
                3px 3px 15px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(100, 226, 126, 0.8),
                /* Enhanced glow on hover */
                0 0 30px rgba(100, 226, 126, 0.8);
        }

        .submit-btn:active {
            transform: scale(0.95);
        }
    </style>
</head>

<body>
    <div class="container">
        <header class="container-fluid d-flex flex-column justify-content-center align-items-center mt-3">
            <img src="https://img2.pic.in.th/pic/1730737040513.png" alt="" style="width: 100px; max-height: 100px;"
                class="img-fluid mb-1">
            <div class="h3 lh-2 fw-bold w-100 header-text text-center">ลงทะเบียนเข้าร่วมงาน<br>THAILAND LOCKSMITH 2024
            </div>
        </header>
        <main class="container-fluid">
            <section id="page1" class="mt-5 mb-5 pt-3 pages d-none">
                <div class="row">
                    <div class="col-12">
                        <button class="btn btn-orange w-100 rounded-pill fw-bold lh-2"
                            onclick="window.location.href='?p=2'">
                            ลงทะเบียน เข้าร่วมงาน<br>
                            กรณีมีรหัสลูกค้าผลเลิศ
                        </button>
                        <div class="circle-orange-with-right-arrow"><i class="bi bi-chevron-double-right d-flex"></i>
                        </div>

                    </div>
                    <div class="col-12">
                        <button class="btn btn-gold w-100 rounded-pill fw-bold lh-2"
                            onclick="window.location.href='?p=3'">
                            ลงทะเบียน เข้าร่วมงาน<br>
                            กรณียังไม่มีรหัสลูกค้า
                        </button>
                        <div class="circle-gold-with-right-arrow"><i class="bi bi-chevron-double-right d-flex"></i>
                        </div>

                    </div>
                    <div class="col-12"></div>
                </div>
            </section>
            <section id="page2" class="mt-3 mb-5 pages d-none">
                <form id="id-checker" class="needs-validation" novalidate>
                    <div class="row g-4 p-2">
                        <div class="col-12">
                            <!-- inline form input -->
                            <div class="row g-3 align-items-center">
                                <div class="col-12">
                                    <input type="text" class="form-control text-center form-control-lg" id="check-id" name="check-id" placeholder="กรอกรหัสลูกค้า"
                                        required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกรหัสลูกค้า
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 text-center">
                            <button class="submit-btn fs-5">
                                ตรวจสอบ
                            </button>
                        </div>
                    </div>
                </form>
                <form id="member-form" class="needs-validation d-none" novalidate>
                    <div class="row g-2 p-2">
                        <div class="col-12">
                            <!-- inline form input -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="member-id" class="col-form-label">รหัสลูกค้า</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="member-id" name="member-id" required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกรหัสลูกค้า
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <!-- name -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="name" class="col-form-label">ชื่อ-นามสกุล</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="name" name="name" required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกชื่อ-นามสกุล
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <!-- province -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="province" class="col-form-label">จังหวัด</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="province" name="province" required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกจังหวัด
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <!-- phone -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="phone" class="col-form-label">เบอร์โทรศัพท์</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="phone" name="phone" required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกเบอร์โทรศัพท์
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 h4 ms-2">
                            วันที่สนใจเข้าร่วมงาน
                        </div>
                        <div class="col-12 ms-4">
                            <!-- radio -->
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date1"
                                    value="วันเสาร์ที่ 14 ธันวาคม 2564" required>
                                <label class="form-check-label" for="date1">วันเสาร์ที่ 14 ธันวาคม 2564</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date2"
                                    value="วันอาทิตย์ที่ 15 ธันวาคม 2564" required>
                                <label class="form-check-label" for="date2">วันอาทิตย์ที่ 15 ธันวาคม 2564</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date3"
                                    value="เข้าร่วมทั้ง 2 วัน" required>
                                <label class="form-check-label" for="date3">เข้าร่วมทั้ง 2 วัน <small
                                        class="text-muted">(แนะนำ 2 วัน)</small></label>
                                <div class="invalid-feedback">
                                    กรุณาเลือกวันที่สนใจเข้าร่วมงาน
                                </div>
                            </div>
                            <span class="form-text">(2 วันที่จะยกระดับความเชี่ยวชาญในอาชีพของคุณ)</span>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 h5 ms-2">
                            (ถ้ามีผู้ติดตาม) ระบุ ชื่อ-สกุล
                        </div>
                        <div class="col-12 px-4">
                            <input type="text" class="form-control" id="follower" name="follower">
                        </div>
                        <span class="form-text w-100 text-center">(ตรวจสอบโดยอ้างอิงจากบัตรประชาชน)</span>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12 text-center">

                            <button class="submit-btn fs-5">
                                สมัครลงทะเบียน
                            </button>
                        </div>
                    </div>
                </form>
            </section>
            <section id="page3" class="mt-3 mb-5 pages d-none">
                <form id="guest-form" class="needs-validation" novalidate>
                    <div class="row g-2 p-2">
                        <div class="col-12">
                            <!-- name -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="guest-name" class="col-form-label">ชื่อ-นามสกุล</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="guest-name" name="guest-name" required>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <!-- province -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="guest-province" class="col-form-label">จังหวัด</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="guest-province" name="guest-province"
                                        required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกจังหวัด
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <!-- phone -->
                            <div class="row g-3 align-items-center">
                                <div class="col-4">
                                    <label for="guest-phone" class="col-form-label">เบอร์โทรศัพท์</label>
                                </div>
                                <div class="col-8">
                                    <input type="text" class="form-control" id="guest-phone" name="guest-phone"
                                        required>
                                    <div class="invalid-feedback">
                                        กรุณากรอกเบอร์โทรศัพท์
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="row g-3 align-items-start">
                                <div class="col-2">
                                    <label for="guest-occupation" class="col-form-label">อาชีพ</label>
                                </div>
                                <div class="col-10 mt-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc1"
                                            value="ช่างกุญแจ" required>
                                        <label class="form-check-label" for="oc1">ช่างกุญแจ</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc2"
                                            value="ช่างมอเตอร์ไซค์" required>
                                        <label class="form-check-label" for="oc2">ช่างมอเตอร์ไซค์</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" name="guest-occupation" id="oc3"
                                            value="ช่างซ่อมรถยนต์" required>
                                        <label class="form-check-label" for="oc3">ช่างซ่อมรถยนต์</label>
                                    </div>
                                    <div class="invalid-feedback">
                                        กรุณาเลือกอาชีพ
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="row g-3 align-items-start">
                                <div class="col-4">
                                    <label for="guest-interest" class="col-form-label">สินค้าที่สนใจ</label>
                                </div>
                                <div class="col-8">
                                    <select class="form-control" id="guest-interest" name="guest-interest" required>
                                        <!-- เครื่องตัดกุญแจอัตโนมัติ
                                    เครื่องตัดกุญแจมาตรฐาน
                                    อุปกรณ์ช่างกุญแจ
                                    เครื่องโปรแกรมชิพและรีโมท -->
                                        <option value="">เลือก</option>
                                        <option value="เครื่องตัดกุญแจอัตโนมัติ">เครื่องตัดกุญแจอัตโนมัติ</option>
                                        <option value="เครื่องตัดกุญแจมาตรฐาน">เครื่องตัดกุญแจมาตรฐาน</option>
                                        <option value="อุปกรณ์ช่างกุญแจ">อุปกรณ์ช่างกุญแจ</option>
                                        <option value="เครื่องโปรแกรมชิพและรีโมท">เครื่องโปรแกรมชิพและรีโมท</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        กรุณาเลือกสินค้าที่สนใจ
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 h4 ms-2">
                            วันที่สนใจเข้าร่วมงาน
                        </div>
                        <div class="col-12 ms-4">
                            <!-- radio -->
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date1"
                                    value="วันเสาร์ที่ 14 ธันวาคม 2564" required>
                                <label class="form-check-label" for="date1">วันเสาร์ที่ 14 ธันวาคม 2564</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date2"
                                    value="วันอาทิตย์ที่ 15 ธันวาคม 2564" required>
                                <label class="form-check-label" for="date2">วันอาทิตย์ที่ 15 ธันวาคม 2564</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="date" id="date3"
                                    value="เข้าร่วมทั้ง 2 วัน" required>
                                <label class="form-check-label" for="date3">เข้าร่วมทั้ง 2 วัน <small
                                        class="text-muted">(แนะนำ 2 วัน)</small></label>
                                <div class="invalid-feedback">
                                    กรุณาเลือกวันที่สนใจเข้าร่วมงาน
                                </div>
                            </div>
                            <span class="form-text">(2 วันที่จะยกระดับความเชี่ยวชาญในอาชีพของคุณ)</span>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12 text-center">

                            <button class="submit-btn fs-5">
                                สมัครลงทะเบียน
                            </button>
                        </div>
                    </div>
                </form>
            </section>
        </main>
    </div>
    <script>
        const scriptUrl = 'https://script.google.com/macros/s/AKfycbwCeN5KWWO6EjmK1QYeRodjef2qXNs01PeZS6xZQBzHH_3uFMxChgBavC4WAtH0wbwFHw/exec'
        const LIFF_ID = '1656187634-ZVB4KEdw'
        var folder_token_obj, auth_users
        $(document).ready(function () {
            let page = new URLSearchParams(window.location.search).get('p');
            page = page == null ? 1 : page;
            if (page) {
                changePage(page);
            }
            $.LoadingOverlay("show");
            liff.init({
                liffId: LIFF_ID,
                withLoginOnExternalBrowser: true
            })
            liff.ready.then(() => {
                // console.log(liff.getContext());
                // if (liff.getOS() != 'android' && liff.getContext().type != 'external') {
                //     liff.openWindow({ url: liff.getContext().endpointUrl, external: true })
                //     liff.closeWindow()
                // }
                initApp();
                console.log('liff ready');

            });
            $('[name="guest-occupation"]').on('change', function () {
                let checked = $('[name="guest-occupation"]:checked').length
                if(checked == 0) {
                    $('[name="guest-occupation"]').prop('required', true)
                } else {
                    $('[name="guest-occupation"]').prop('required', false)
                }
            })
        });
        function changePage(page) {
            $('.pages').addClass('d-none');
            $('#page' + page).removeClass('d-none');
        }

        function initApp() {
            $.LoadingOverlay("hide");
        }

        function checkMemberId(){
            let id = $('#check-id').val()
            console.log("🚀 ~ checkMemberId ~ id:", id)
            if(id == '') {
                return Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณากรอกรหัสลูกค้า',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                })
            }
            $.LoadingOverlay("show");
            $.post(scriptUrl, {opt: 'checkMemberId', id: id}, function(res){
                console.log(res);
                $.LoadingOverlay("hide");
                if(res.status == 'not found') {
                    return Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        text: 'ไม่พบรหัสลูกค้า',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false
                    })
                }
                $('#id-checker').addClass('d-none')
                $('#member-form').removeClass('d-none')
                $('#member-id').val(id)
                $('#name').val(res.name)
                $('#province').val(res.province)
                $('#phone').val(res.phone)
            }).fail(function(res){
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                })
            })
        }

        function submitMemberForm() {
            $.LoadingOverlay("show");
            let data = {
                member_id: $('#member-form #member-id').val(),
                name: $('#member-form #name').val(),
                province: $('#member-form #province').val(),
                phone: $('#member-form #phone').val(),
                date: $('#member-form input[name=date]:checked').val(),
                follower: $('#member-form #follower').val(),
                uid: liff.getContext().userId,
                opt: 'memberRegist'
            }
            console.log(data);
            $.post(scriptUrl, data, function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                sendMessage('member', data)
                Swal.fire({
                    icon: 'success',
                    title: 'ลงทะเบียนสำเร็จ',
                    text: 'ขอบคุณที่ลงทะเบียนเข้าร่วมงาน THAILAND LOCKSMITH 2024',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                }).then((result) => {
                    if (result.isConfirmed) {
                        liff.closeWindow()
                    }
                })
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                })
            })
        }

        function submitGuestForm() {
            $.LoadingOverlay("show");
            let data = {
                name: $('#guest-form #guest-name').val(),
                province: $('#guest-form #guest-province').val(),
                phone: $('#guest-form #guest-phone').val(),
                occupation: $('#guest-form input[name=guest-occupation]:checked').map(function () {
                    return this.value
                }).get().join(', '),
                interest: $('#guest-form #guest-interest').val(),
                date: $('#guest-form input[name=date]:checked').val(),
                uid: liff.getContext().userId,
                opt: 'guestRegist'
            }
            console.log(data);
            $.post(scriptUrl, data, function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                if (res.status == 'already register') {
                    return Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        text: 'คุณได้ลงทะเบียนเข้าร่วมงานแล้ว',
                        confirmButtonText: 'ปิด',
                        allowOutsideClick: false
                    })
                }
                data.guest_id = res.guest_id
                sendMessage('guest', data)
                Swal.fire({
                    icon: 'success',
                    title: 'ลงทะเบียนสำเร็จ',
                    text: 'ขอบคุณที่ลงทะเบียนเข้าร่วมงาน THAILAND LOCKSMITH 2024',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                }).then((result) => {
                    if (result.isConfirmed) {
                        liff.closeWindow()
                    }
                })
            }).fail(function (res) {
                console.log(res);
                $.LoadingOverlay("hide");
                Swal.fire({
                    icon: 'error',
                    title: 'เกิดข้อผิดพลาด',
                    text: 'กรุณาลองใหม่อีกครั้ง',
                    confirmButtonText: 'ปิด',
                    allowOutsideClick: false
                })
            })
        }

        function sendMessage(type, data) {
            let flex = {
                "type": "bubble",
                "size": "giga",
                "body": {
                    "type": "box",
                    "layout": "vertical",
                    "contents": [
                        {
                            "type": "image",
                            "url": "https://cdn4.vectorstock.com/i/1000x1000/67/18/green-rectangle-tiled-mosaic-pattern-background-vector-16316718.jpg",
                            "size": "full",
                            "position": "absolute",
                            "aspectMode": "cover",
                            "margin": "none",
                            "aspectRatio": "1:1.5"
                        },
                        {
                            "type": "box",
                            "layout": "vertical",
                            "contents": [
                                {
                                    "type": "box",
                                    "layout": "horizontal",
                                    "flex": 1,
                                    "width": "350px",
                                    "contents": [
                                        {
                                            "type": "box",
                                            "layout": "vertical",
                                            "contents": [
                                                {
                                                    "type": "text",
                                                    "text": "WWW.POLLERT.COM",
                                                    "color": "#eac284",
                                                    "size": "xxs",
                                                    "align": "start"
                                                },
                                                {
                                                    "type": "text",
                                                    "text": "THAILAND LOCKSMITH 2024",
                                                    "color": "#FFFFFF",
                                                    "size": "lg",
                                                    "align": "start",
                                                    "weight": "bold",
                                                    "scaling": true,
                                                    "adjustMode": "shrink-to-fit"
                                                }
                                            ],
                                            "flex": 9,
                                            "spacing": "md"
                                        },
                                        {
                                            "type": "box",
                                            "layout": "vertical",
                                            "contents": [
                                                {
                                                    "type": "image",
                                                    "url": "https://img2.pic.in.th/pic/1730737040513.png",
                                                    "aspectMode": "fit",
                                                    "position": "relative",
                                                    "size": "xs",
                                                    "offsetTop": "-10px"
                                                }
                                            ],
                                            "flex": 2,
                                            "alignItems": "flex-end",
                                            "justifyContent": "flex-start",
                                            "offsetTop": "none",
                                            "paddingTop": "none"
                                        }
                                    ]
                                },
                                {
                                    "type": "box",
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "type": "text",
                                            "text": type == 'member' ? data.member_id : data.guest_id,
                                            "align": "center",
                                            "size": "xl",
                                            "weight": "bold",
                                            "gravity": "center",
                                            "color": "#000000",
                                            "scaling": true,
                                            "adjustMode": "shrink-to-fit"
                                        }
                                    ],
                                    "width": "230px",
                                    "backgroundColor": "#eac285",
                                    "cornerRadius": "md",
                                    "justifyContent": "center",
                                    "alignItems": "center"
                                },
                                {
                                    "type": "box",
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "type": "text",
                                            "text": data.name,
                                            "weight": "bold",
                                            "size": "xl",
                                            "color": "#eac285",
                                            "align": "center",
                                            "adjustMode": "shrink-to-fit",
                                            "scaling": true
                                        }
                                    ]
                                },
                                {
                                    "type": "box",
                                    "layout": "vertical",
                                    "contents": [
                                        {
                                            "type": "text",
                                            "text": "บัตรเข้างานวันอาทิตย์ที่ 14-15 ธันวาคม 2567 โปรดแสดงบัตรนี้พร้อมบัตรประชาชนก่อนเข้างาน",
                                            "color": "#FFD700",
                                            "size": "sm",
                                            "align": "center",
                                            "wrap": true
                                        },
                                        {
                                            "type": "image",
                                            "url": "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" + encodeURIComponent(type == 'member' ? data.member_id : data.guest_id),
                                            "size": "sm",
                                            "aspectMode": "cover",
                                            "margin": "lg"
                                        },
                                        {
                                            "type": "text",
                                            "text": "SCAN QR-CODE",
                                            "color": "#eac285",
                                            "size": "xs",
                                            "align": "center",
                                            "margin": "md"
                                        }
                                    ],
                                    "paddingAll": "lg"
                                }
                            ],
                            "paddingAll": "md",
                            "justifyContent": "center",
                            "alignItems": "center",
                            "spacing": "md",
                            "backgroundColor": "#00000066"
                        }
                    ],
                    "backgroundColor": "#004225",
                    "justifyContent": "center",
                    "alignItems": "center",
                    "paddingAll": "none"
                },
                "styles": {
                    "body": {
                        "backgroundColor": "#004225"
                    },
                    "footer": {
                        "backgroundColor": "#004225"
                    }
                }
            }

            if (data.follower && data.follower != '') {
                flex.body.contents[1].contents[2].contents.push(
                    {
                        "type": "text",
                        "text": "&",
                        "weight": "bold",
                        "size": "xl",
                        "color": "#eac285",
                        "align": "center"
                    }, {
                    "type": "text",
                    "text": data.follower,
                    "weight": "bold",
                    "size": "xl",
                    "color": "#eac285",
                    "align": "center",
                    "scaling": true,
                    "adjustMode": "shrink-to-fit"
                })
            }
            console.log(JSON.stringify(flex));
            liff.sendMessages([{
                "type": "flex",
                "altText": "ลงทะเบียนสำเร็จ",
                "contents": flex
            }]).then(() => {
                console.log('message sent');
            }).catch((err) => {
                console.log(err);
            })
        }
    </script>
    <script>
        (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        event.preventDefault()
                        if (!form.checkValidity()) {
                            event.stopPropagation()
                            form.classList.add('was-validated')
                            $(form).find(':invalid').first().focus()
                        } else {
                            if (form.id == 'id-checker') return checkMemberId()
                            if (form.id == 'member-form') return submitMemberForm()
                            if (form.id == 'guest-form') return submitGuestForm()
                        }
                    }, false)
                })
        })()
    </script>
    <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js"></script>
    <script>
        // VConsole will be exported to `window.VConsole` by default.
        var vConsole = new window.VConsole();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script
        src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.7/dist/loadingoverlay.min.js"></script>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</body>

</html>
